{"version":3,"file":"BundleStars.b92381009757f86882eb.js","mappings":"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","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/BadgeButton.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/hooks/animations/useTransitionActiveKey.ts","webpack://telegram-t/./src/hooks/useCustomBackground.ts","webpack://telegram-t/./src/hooks/useDebouncedMemo.ts","webpack://telegram-t/./src/hooks/usePeerSearch.ts","webpack://telegram-t/./src/util/localization/format.tsx","webpack://telegram-t/./src/components/common/BadgeButton.module.scss?da7b","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.module.scss?be1f","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215"],"sourcesContent":["export { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftStatusInfoModal } from '../components/modals/gift/status/GiftStatusInfoModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/withdraw/GiftWithdrawModal';\nexport { default as GiftTransferModal } from '../components/modals/gift/transfer/GiftTransferModal';\n","import React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './BadgeButton.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n};\n\nconst BadgeButton = ({\n  children,\n  className,\n  onClick,\n}: OwnProps) => {\n  return (\n    <div className={buildClassName(styles.root, onClick && styles.clickable, className)} onClick={onClick}>\n      {children}\n    </div>\n  );\n};\n\nexport default BadgeButton;\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","import type { ChangeEvent } from 'react';\nimport React, {\n  memo, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessage, ApiPeer } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getPeerTitle } from '../../../global/helpers';\nimport { isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectPeer, selectTabState, selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\n\nfunction GiftComposer({\n  gift,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n}: OwnProps & StateProps) {\n  const { sendStarGift, openInvoice, openGiftUpgradeModal } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  const isStarGift = 'id' in gift;\n  const isPeerUser = peer && isApiPeerUser(peer);\n\n  const localMessage = useMemo(() => {\n    if (!isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: true,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            targetChatId: peerId,\n            mediaType: 'action',\n            text: 'ActionGiftInbound',\n            type: 'giftPremium',\n            amount: gift.amount,\n            currency: gift.currency,\n            months: gift.months,\n            message: {\n              text: giftMessage,\n            },\n            translationValues: ['%action_origin%', '%gift_payment_amount%'],\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    return {\n      id: -1,\n      chatId: currentUserId!,\n      isOutgoing: false,\n      senderId: currentUserId,\n      date: Math.floor(Date.now() / 1000),\n      content: {\n        action: {\n          targetChatId: peerId,\n          mediaType: 'action',\n          text: 'ActionGiftInbound',\n          type: 'starGift',\n          currency: STARS_CURRENCY_CODE,\n          amount: gift.stars,\n          starGift: {\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            isSaved: false,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n          translationValues: ['%action_origin%', '%gift_payment_amount%'],\n        },\n      },\n    } satisfies ApiMessage;\n  }, [currentUserId, gift, giftMessage, isStarGift, shouldHideName, shouldPayForUpgrade, peerId]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    openInvoice({\n      type: 'giftcode',\n      userIds: [peerId],\n      currency: gift.currency,\n      amount: gift.amount,\n      option: gift,\n      message: giftMessage ? { text: giftMessage } : undefined,\n    });\n  });\n\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n        <TextArea\n          className={styles.messageInput}\n          onChange={handleGiftMessageChange}\n          value={giftMessage}\n          label={lang('GiftMessagePlaceholder')}\n          maxLength={captionLimit}\n          maxLengthIndicator={symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined}\n        />\n\n        {isStarGift && gift.upgradeStars && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldPayForUpgradeChange}>\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isPeerUser ? lang('GiftHideNameDescription', { receiver: title }) : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = isStarGift\n      ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n      : formatCurrency(gift.amount, gift.currency);\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && gift.availabilityRemains && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        <Button\n          className={styles.mainButton}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n        >\n          {lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage key={isStarGift ? gift.id : gift.months} message={localMessage} />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId }): StateProps => {\n    const theme = selectTheme(global);\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = global.settings.themes[theme] || {};\n    const peer = selectPeer(global, peerId);\n\n    const tabState = selectTabState(global);\n\n    return {\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig?.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n    };\n  },\n)(GiftComposer));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {Boolean(discount) && (\n        <GiftRibbon color=\"red\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): StateProps => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import React, { memo, useRef } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiStarGiftRegular,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useFlag from '../../../hooks/useFlag';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGiftRegular;\n  observeIntersection?: ObserveFn;\n  onClick: (gift: ApiStarGiftRegular) => void;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({ gift, observeIntersection, onClick }: OwnProps) {\n  const { openGiftInfoModal } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const [shouldPlay, play] = useFlag();\n\n  const {\n    stars,\n    isLimited,\n    isSoldOut,\n    sticker,\n  } = gift;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isSoldOut) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    onClick(gift);\n  });\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    if (entry.isIntersecting) play();\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.container, styles.starGift)}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        noLoop\n        play={shouldPlay}\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n      <Button className={styles.buy} nonInteractive size=\"tiny\" color=\"stars\" withSparkleEffect pill fluid>\n        <Icon name=\"star\" className={styles.star} />\n        <div className={styles.amount}>\n          {stars}\n        </div>\n      </Button>\n      {isLimited && !isSoldOut && <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />}\n      {isSoldOut && <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />}\n    </div>\n  );\n}\n\nexport default memo(GiftItemStar);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { getPeerTitle, getUserFullName } from '../../../global/helpers';\nimport { isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectPeer } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftSendingOptions from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGiftRegular;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  isSelf?: boolean;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst PremiumGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  starBalance,\n  peer,\n  isSelf,\n}) => {\n  const {\n    closeGiftModal,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const giftHeaderRef = useRef<HTMLHeadingElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollerRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const user = peer && isApiPeerUser(peer) ? peer : undefined;\n  const chat = peer && isApiPeerChat(peer) ? peer : undefined;\n\n  const [selectedGift, setSelectedGift] = useState<GiftOption | undefined>();\n  const [isHeaderHidden, setIsHeaderHidden] = useState(true);\n  const [isHeaderForStarGifts, setIsHeaderForStarGifts] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const filteredGifts = useMemo(() => {\n    return renderingModal?.gifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1);\n  }, [renderingModal]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsHeaderHidden(true);\n      setSelectedGift(undefined);\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (selectedGift) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setIsHeaderHidden(scrollTop <= 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = chat\n    ? lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n      withNodes: true,\n      withMarkdown: true,\n    })\n    : isSelf\n      ? lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      })\n      : lang('StarGiftDescription', {\n        user: getUserFullName(user)!,\n      }, { withNodes: true, withMarkdown: true });\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption) => {\n    setSelectedGift(gift);\n    setIsHeaderForStarGifts('id' in gift);\n    setIsHeaderHidden(false);\n  });\n\n  function renderStarGifts() {\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && starGiftIdsByCategory?.[selectedCategory].map((giftId) => {\n          const gift = starGiftsById[giftId];\n          return (\n            <GiftItemStar\n              gift={gift}\n              observeIntersection={observeIntersection}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (selectedGift) {\n      setSelectedGift(undefined);\n      return;\n    }\n    closeGiftModal();\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            size={AVATAR_SIZE}\n            peer={peer}\n          />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n        </div>\n        {!isSelf && !chat && renderGiftPremiumHeader()}\n        {!isSelf && !chat && renderGiftPremiumDescription()}\n        {!isSelf && !chat && renderPremiumGifts()}\n\n        {renderStarGiftsHeader()}\n        {renderStarGiftsDescription()}\n        <StarGiftCategoryList onCategoryChanged={onCategoryChanged} />\n        <Transition\n          name=\"zoomFade\"\n          activeKey={getCategoryKey(selectedCategory)}\n          className={styles.starGiftsTransition}\n        >\n          {renderStarGifts()}\n        </Transition>\n      </div>\n    );\n  }\n\n  const isBackButton = Boolean(selectedGift);\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={closeGiftModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} />\n      <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={Number(isHeaderForStarGifts)}\n          slideClassName={styles.headerSlide}\n        >\n          <h2 className={styles.commonHeaderText}>\n            {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n          </h2>\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={selectedGift ? 1 : 0}\n      >\n        {!selectedGift && renderMainScreen()}\n        {selectedGift && renderingModal?.forPeerId && (\n          <GiftSendingOptions gift={selectedGift} peerId={renderingModal.forPeerId} />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const isSelf = Boolean(currentUserId && modal?.forPeerId === currentUserId);\n\n  return {\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    starBalance: stars?.balance,\n    peer,\n    isSelf,\n  };\n})(PremiumGiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return -2;\n  if (category === 'limited') return -1;\n  if (category === 'stock') return 0;\n  return category;\n}\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  idsByCategory,\n  onCategoryChanged,\n}: StateProps & OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const starCategories: number[] | undefined = useMemo(() => idsByCategory && Object.keys(idsByCategory)\n    .filter((category) => category !== 'all' && category !== 'limited')\n    .map(Number)\n    .sort((a, b) => a - b),\n  [idsByCategory]);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(\n      category,\n    );\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'stock') return lang('StockGiftsCategory');\n    if (category === 'limited') return lang('LimitedGiftsCategory');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {Number.isInteger(category) && (\n          <StarIcon\n            className={styles.star}\n            type=\"gold\"\n            size=\"middle\"\n          />\n        )}\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {renderCategoryItem('limited')}\n      {renderCategoryItem('stock')}\n      {starCategories?.map(renderCategoryItem)}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  subtitle?: string;\n  className?: string;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  subtitle,\n  className,\n}: OwnProps) => {\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n    const patternColor = backdropAttribute.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternAttribute.sticker}\n      />\n    );\n  }, [backdropAttribute, patternAttribute]);\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      <Transition\n        className={styles.transition}\n        slideClassName={styles.transitionSlide}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n        />\n      </Transition>\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {subtitle && (\n        <p className={styles.subtitle} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n          {subtitle}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","import type { FC, TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible,\n  ApiEmojiStatusType,\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { DEFAULT_STATUS_ICON_ID, TME_LINK_PREFIX } from '../../../../config';\nimport { getHasAdminRight, getPeerTitle } from '../../../../global/helpers';\nimport { isApiPeerChat } from '../../../../global/helpers/peers';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatInteger, formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport Link from '../../../ui/Link';\nimport MenuItem from '../../../ui/MenuItem';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    openChatWithDraft,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    openGiftTransferModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n\n  const currenUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const starGiftUniqueLink = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return `${TME_LINK_PREFIX}nft/${starGiftUniqueSlug}`;\n  }, [starGiftUniqueSlug]);\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((\n      status,\n    ) => status.type === 'collectible' && status.slug === starGiftUniqueSlug) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const canTakeOff = isGiftUnique && currenUniqueEmojiStatusSlug === gift.slug;\n  const canWear = userCollectibleStatus && !canTakeOff;\n\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n  const canUpdate = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights : renderingTargetPeer?.id === currentUserId\n  );\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    copyTextToClipboard(starGiftUniqueLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleLinkShare = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    openChatWithDraft({ text: { text: starGiftUniqueLink } });\n    handleClose();\n  });\n\n  const handleTransfer = useLastCallback(() => {\n    if (savedGift?.gift.type !== 'starGiftUnique') return;\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !userCollectibleStatus) return;\n    openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n  });\n\n  const handleTakeOff = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    }\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    if (!savedGift?.upgradeMsgId || !renderingTargetPeer) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: renderingTargetPeer.id, messageId: upgradeMsgId! });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const SettingsMenuButton: FC<{ onTrigger: () => void; isMenuOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isMenuOpen }) => (\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        className={isMenuOpen ? 'active' : ''}\n        onClick={onTrigger}\n        ariaLabel={lang('AriaMoreButton')}\n      >\n        <Icon name=\"more\" />\n      </Button>\n    );\n  }, [lang]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canFocusUpgrade) {\n      return (\n        <Button size=\"smaller\" onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canUpdate && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button size=\"smaller\" isShiny onClick={handleOpenUpgradeModal}>\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button size=\"smaller\" onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted,\n    } = savedGift || {};\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars) {\n        return canUpdate\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canUpdate && !isSender) return undefined;\n      if (isConverted && starsToConvert) {\n        return canUpdate\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: formatInteger(starsToConvert!),\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: formatInteger(starsToConvert!),\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canUpdate) {\n        return lang('GiftInfoDescriptionUpgrade', {\n          amount: formatInteger(starsToConvert!),\n        }, {\n          pluralValue: starsToConvert!,\n          withNodes: true,\n          withMarkdown: true,\n        });\n      }\n\n      return canUpdate\n        ? lang('GiftInfoDescription', {\n          amount: starsToConvert,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert || 0,\n        })\n        : lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert || 0,\n        });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canUpdate ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftContextMenu = (\n      <DropdownMenu\n        className=\"with-menu-transitions\"\n        trigger={SettingsMenuButton}\n        positionX=\"right\"\n      >\n        <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n          {lang('CopyLink')}\n        </MenuItem>\n        <MenuItem icon=\"forward\" onClick={handleLinkShare}>\n          {lang('Share')}\n        </MenuItem>\n        {canUpdate && isGiftUnique && (\n          <MenuItem icon=\"diamond\" onClick={handleTransfer}>\n            {lang('GiftInfoTransfer')}\n          </MenuItem>\n        )}\n        {canWear && (\n          <MenuItem icon=\"crown-wear\" onClick={handleWear}>\n            {lang('GiftInfoWear')}\n          </MenuItem>\n        )}\n        {canTakeOff && (\n          <MenuItem icon=\"crown-take-off\" onClick={handleTakeOff}>\n            {lang('GiftInfoTakeOff')}\n          </MenuItem>\n        )}\n      </DropdownMenu>\n    );\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n        <Button\n          className={styles.modalCloseButton}\n          round\n          color=\"translucent-white\"\n          size=\"smaller\"\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        {isOpen && uniqueGiftContextMenu}\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {description && (\n          <p className={buildClassName(styles.description, !savedGift && gift?.type === 'starGift' && styles.soldOut)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      if ((fromId || isNameHidden)) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          fromId ? { chatId: fromId } : (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ),\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          formatDateTimeToString(savedGift.date * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.firstSaleDate) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canUpdate && canConvertDifference > 0 && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !savedGift?.upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n            {canUpdate && <BadgeButton onClick={handleOpenUpgradeModal}>{lang('GiftInfoUpgradeBadge')}</BadgeButton>}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            {model.name}<BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            {backdrop.name}<BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            {pattern.name}<BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (originalDetails) {\n        const {\n          date, recipientId, message, senderId,\n        } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n        const recipientLink = (\n          // eslint-disable-next-line react/jsx-no-bind\n          <Link onClick={() => openChat(recipientId)} isPrimary>\n            {getPeerTitle(lang, recipient)}\n          </Link>\n        );\n\n        let text: TeactNode | undefined;\n        if (!sender || senderId === recipientId) {\n          text = message ? lang('GiftInfoPeerOriginalInfoText', {\n            peer: recipientLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfo', {\n            peer: recipientLink,\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          });\n        } else {\n          const senderLink = (\n            // eslint-disable-next-line react/jsx-no-bind\n            <Link onClick={() => openChat(sender.id)} isPrimary>\n              {getPeerTitle(lang, sender)}\n            </Link>\n          );\n          text = message ? lang('GiftInfoPeerOriginalInfoTextSender', {\n            peer: recipientLink,\n            sender: senderLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfoSender', {\n            peer: recipientLink,\n            date: formattedDate,\n            sender: senderLink,\n          }, {\n            withNodes: true,\n          });\n        }\n\n        tableData.push([\n          undefined,\n          <span>{text}</span>,\n        ]);\n      }\n    }\n\n    const footer = (\n      <div className={styles.footer}>\n        {canUpdate && (\n          <div className={styles.footerDescription}>\n            <div>\n              {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                link: (\n                  <Link isPrimary onClick={handleTriggerVisibility}>\n                    {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                  </Link>\n                ),\n              }, {\n                withNodes: true,\n              })}\n            </div>\n            {isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canUpdate, canConvertDifference, isSender, oldLang,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    SettingsMenuButton, isOpen, isGiftUnique, canWear, canTakeOff,\n  ]);\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        onClose={handleClose}\n      />\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {canConvertDifference > 0 && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = global.currentUserId ? selectUser(global, global.currentUserId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      fromPeer,\n      targetPeer,\n      currentUserId: global.currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n    };\n  },\n)(GiftInfoModal));\n","import React, {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n    const patternColor = emojiStatus.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternIcon.customEmoji}\n      />\n    );\n  }, [emojiStatus, isOpen, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size=\"jumbo\" className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n            statusSparklesColor={subtitleColor}\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.titleContainer}>\n          <div className={styles.giftTitle}>{\n            lang('UniqueStatusWearTitle', {\n              gift: mockPeerWithStatus?.emojiStatus?.title,\n            })\n          }\n          </div>\n          <div className={styles.infoDescription}>{\n            lang('UniqueStatusBenefitsDescription')\n          }\n          </div>\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          size=\"smaller\"\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers';\nimport { selectCanGift, selectPeer } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftTransferModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const { closeGiftTransferModal, openGiftWithdrawModal, transferGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const uniqueGift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = uniqueGift && getGiftAttributes(uniqueGift);\n\n  const [selectedId, setSelectedId] = useState<string | undefined>();\n\n  const renderingSelectedPeerId = useCurrentOrPrev(selectedId);\n  const renderingSelectedPeer = useMemo(() => {\n    const global = getGlobal();\n    return renderingSelectedPeerId ? selectPeer(global, renderingSelectedPeerId) : undefined;\n  }, [renderingSelectedPeerId]);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const closeConfirmModal = useLastCallback(() => {\n    setSelectedId(undefined);\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedId(undefined);\n    }\n  }, [isOpen]);\n\n  const handleTransfer = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift) return;\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingSelectedPeerId!,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeConfirmModal();\n    closeGiftTransferModal();\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={setSelectedId}\n      />\n      {giftAttributes && (\n        <ConfirmDialog\n          isOpen={Boolean(selectedId)}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={renderingModal?.gift.transferStars\n            ? lang(\n              'GiftTransferConfirmButton',\n              { amount: formatStarsAsIcon(lang, renderingModal.gift.transferStars, { asFont: true }) },\n              { withNodes: true },\n            ) : lang('GiftTransferConfirmButtonFree')}\n          confirmHandler={handleTransfer}\n        >\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternColor={giftAttributes.backdrop?.patternColor}\n                patternIcon={giftAttributes.pattern?.sticker}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={renderingSelectedPeer}\n              size={AVATAR_SIZE}\n              className={styles.avatar}\n            />\n          </div>\n          <p>\n            {renderingModal?.gift.transferStars\n              ? lang('GiftTransferConfirmDescription', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                amount: formatStarsAsText(lang, renderingModal.gift.transferStars),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })\n              : lang('GiftTransferConfirmDescriptionFree', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })}\n          </p>\n        </ConfirmDialog>\n      )}\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  ApiStarGiftRegular,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { ApiMediaFormat } from '../../../../api/types';\n\nimport { getPeerTitle, getStickerMediaHash } from '../../../../global/helpers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { fetch } from '../../../../util/mediaLoader';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\ntype Attributes = {\n  model: ApiStarGiftAttributeModel;\n  pattern: ApiStarGiftAttributePattern;\n  backdrop: ApiStarGiftAttributeBackdrop;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const { closeGiftUpgradeModal, upgradeGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const [previewAttributes, setPreviewAttributes] = useState<Attributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? (gift.gift as ApiStarGiftRegular).upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  // Preload stickers and patterns\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    const patternStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'pattern')\n      .map((attr) => attr.sticker);\n    const modelStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'model')\n      .map((attr) => attr.sticker);\n\n    const mediaHashes = [...patternStickers, ...modelStickers].map((sticker) => getStickerMediaHash(sticker, 'full'));\n    mediaHashes.forEach((hash) => {\n      fetch(hash, ApiMediaFormat.BlobUrl);\n    });\n  }, [renderingModal?.sampleAttributes]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const listItemData = [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ] satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} size=\"smaller\" onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            <Checkbox\n              label={lang('GiftUpgradeKeepDetails')}\n              onCheck={setShouldKeepOriginalDetails}\n              checked={shouldKeepOriginalDetails}\n            />\n            <Button className={styles.footerButton} size=\"smaller\" isShiny onClick={handleUpgrade}>\n              {gift.alreadyPaidUpgradeStars\n                ? lang('GeneralConfirm')\n                : lang('GiftUpgradeButton', {\n                  amount: formatStarsAsIcon(lang, (gift.gift as ApiStarGiftRegular).upgradeStars!, { asFont: true }),\n                }, { withNodes: true })}\n            </Button>\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, lang, renderingRecipient, renderingModal?.gift, shouldKeepOriginalDetails]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n\nfunction getRandomAttributes(list: ApiStarGiftAttribute[], previousSelection?: Attributes): Attributes {\n  const models = list.filter((attr): attr is ApiStarGiftAttributeModel => (\n    attr.type === 'model' && attr.name !== previousSelection?.model.name\n  ));\n  const patterns = list.filter((attr): attr is ApiStarGiftAttributePattern => (\n    attr.type === 'pattern' && attr.name !== previousSelection?.pattern.name\n  ));\n  const backdrops = list.filter((attr): attr is ApiStarGiftAttributeBackdrop => (\n    attr.type === 'backdrop' && attr.name !== previousSelection?.backdrop.name\n  ));\n\n  const randomModel = models[Math.floor(Math.random() * models.length)];\n  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];\n  const randomBackdrop = backdrops[Math.floor(Math.random() * backdrops.length)];\n\n  return {\n    model: randomModel,\n    pattern: randomPattern,\n    backdrop: randomBackdrop,\n  };\n}\n","import React, {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const { closeGiftWithdrawModal, clearGiftWithdrawError, processStarGiftWithdrawal } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternColor={giftAttributes.backdrop?.patternColor}\n                patternIcon={giftAttributes.pattern?.sticker}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          clearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { selectChat, selectChatMessage, selectUser } from '../../../global/selectors';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: boolean;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMe?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiUser;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldShowUp, setShouldShowUp] = useState(true);\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const handleAnonimityChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldShowUp(e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMe);\n    if (currentReactor) {\n      setShouldShowUp(!currentReactor.isAnonymous);\n      return;\n    }\n\n    setShouldShowUp(defaultPrivacy || true);\n  }, [defaultPrivacy, message?.reactions?.topReactors]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: !shouldShowUp,\n    });\n    closePaidReactionModal();\n  });\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasMe = false;\n\n    all.forEach((reactor) => {\n      const user = reactor.peerId ? selectUser(global, reactor.peerId) : undefined;\n      if (!user && !reactor.isAnonymous && !reactor.isMe) return;\n\n      if (reactor.isMe) {\n        hasMe = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: reactor.isMe && isTouched ? starsAmount : 0,\n        isMe: reactor.isMe,\n        isAnonymous: reactor.isAnonymous,\n        user,\n      });\n    });\n\n    if (!hasMe && isTouched) {\n      const me = selectUser(global, global.currentUserId!);\n      result.push({\n        amount: 0,\n        localAmount: starsAmount,\n        isMe: true,\n        user: me,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount]);\n\n  const chatTitle = chat && getChatTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n    >\n      <BalanceBlock balance={starBalance} className={styles.modalBalance} />\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMe && !shouldShowUp))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey) : getUserFullName(peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      <Checkbox\n        className=\"dialog-checkbox\"\n        checked={shouldShowUp}\n        onChange={handleAnonimityChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        size=\"smaller\"\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig?.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n    };\n  },\n)(PaidReactionModal));\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  className?: string;\n  onChange: (value: number) => void;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  className,\n  onChange,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const floatingBadgeRef = useRef<HTMLDivElement>(null);\n\n  const points = useMemo(() => {\n    const result = [];\n    for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n      if (DEFAULT_POINTS[i] < maxValue) {\n        result.push(DEFAULT_POINTS[i]);\n      }\n\n      if (DEFAULT_POINTS[i] >= maxValue) {\n        result.push(maxValue);\n        break;\n      }\n    }\n\n    return result;\n  }, [maxValue]);\n\n  const [value, setValue] = useState(0);\n\n  useEffectOnce(() => {\n    setValue(getProgress(points, defaultValue));\n  });\n\n  const updateSafeBadgePosition = useLastCallback(() => {\n    const badge = floatingBadgeRef.current;\n    if (!badge) return;\n    const parent = badge.parentElement!;\n\n    requestMeasure(() => {\n      const safeMinX = parent.offsetLeft + badge.offsetWidth / 2;\n      const safeMaxX = parent.offsetLeft + parent.offsetWidth - badge.offsetWidth / 2;\n\n      requestMutation(() => {\n        parent.style.setProperty('--_min-x', `${safeMinX}px`);\n        parent.style.setProperty('--_max-x', `${safeMaxX}px`);\n      });\n    });\n  });\n\n  useResizeObserver(floatingBadgeRef, updateSafeBadgePosition);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = Number(event.currentTarget.value);\n    setValue(newValue);\n\n    onChange(getValue(points, newValue));\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} style={`--progress: ${value / points.length}`}>\n      <div className={styles.floatingBadgeWrapper}>\n        <div className={styles.floatingBadge} ref={floatingBadgeRef}>\n          <div className={styles.floatingBadgeText}>\n            <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n            <AnimatedCounter text={formatInteger(getValue(points, value))} />\n          </div>\n          <svg className={styles.floatingBadgeTriangle} width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\n            <defs>\n              <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n              </linearGradient>\n            </defs>\n            <path d=\"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z\" fill=\"url(#StarBadgeTriangle)\" />\n          </svg>\n        </div>\n      </div>\n      <div className={styles.progress} />\n      <Sparkles preset=\"progress\" className={styles.sparkles} />\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue)}\n        step=\"any\"\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nfunction getProgress(points: number[], value: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nexport default memo(StarSlider);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport type { ApiStarsAmount } from '../../../api/types';\n\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiStarsAmount;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className }: OwnProps) => {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.balance, className)}>\n      <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n      <div className={styles.balanceBottom}>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined ? formatStarsAmount(lang, balance) : '…'}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport { getChatTitle, getPeerTitle, getUserFullName } from '../../../global/helpers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarLogo from '../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, canBuyPremium, shouldForceHeight,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n  } = getActions();\n\n  const { balance, history, subscriptions } = starsBalanceState || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n    });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <BalanceBlock balance={balance} className={styles.modalBalance} />\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n          <h2 className={styles.headerText}>\n            {starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          </h2>\n          <div className={styles.description}>\n            {renderText(\n              starsNeededText || oldLang('TelegramStarsInfo'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n          {canBuyPremium && !areBuyOptionsShown && (\n            <Button\n              className={styles.starButton}\n              onClick={showBuyOptions}\n            >\n              {oldLang('Star.List.BuyMoreStars')}\n            </Button>\n          )}\n          {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n            <Button\n              isText\n              noForcedUpperCase\n              className={styles.starButton}\n              onClick={openStarsGiftingPickerModalHandler}\n            >\n              {oldLang('TelegramStarsGift')}\n            </Button>\n          )}\n          {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n            <StarTopupOptionList\n              starsNeeded={starsNeeded}\n              options={starsBalanceState.topupOptions}\n              onClick={handleBuyStars}\n            />\n          )}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.section}>\n              <Transition\n                name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const shouldForceHeight = Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n    };\n  },\n)(StarsBalanceModal));\n","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => !!media.duration);\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={oldLang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {disclaimerText && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsGiftModal()}\n          ariaLabel={oldLang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.forUserId ? selectUser(getGlobal(), modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsAmount, ApiStarsTransaction } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { buildStarsTransactionCustomPeer } from '../../../../global/helpers/payments';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(lang: OldLangFn, transaction: ApiStarsTransaction) {\n  if (transaction.starRefCommision) {\n    return lang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return lang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return lang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || lang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return lang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return lang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return lang('StarsGiftSent');\n  if (transaction.isGift) return lang('StarsGiftReceived');\n  if (transaction.starGift) {\n    return isNegativeStarsAmount(transaction.stars) ? lang('Gift2TransactionSent') : lang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n    && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n  if (customPeer) return customPeer.title || lang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeStarsAmount(starsAmount: ApiStarsAmount) {\n  if (starsAmount.amount) return starsAmount.amount < 0;\n  return starsAmount.nanos < 0;\n}\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar peer={!photo ? peer : undefined} webPhoto={photo} size=\"giant\" />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <img\n          className={buildClassName(styles.starsBackground)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            size=\"smaller\"\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst UNIQUE_GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    stars,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const uniqueGift = transaction.starGift?.type === 'starGiftUnique' ? transaction.starGift : undefined;\n  const uniqueGiftSticker = uniqueGift && getStickerFromGift(uniqueGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (transaction.peer.type === 'peer') {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction.peer);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.isGiftUpgrade && transaction.starGift?.type === 'starGiftUnique') {\n      description = transaction.starGift.title;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (uniqueGiftSticker) {\n      const { backdrop } = getGiftAttributes(uniqueGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.uniqueGift}\n            sticker={uniqueGiftSticker}\n            size={UNIQUE_GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [extendedMedia, photo, uniqueGiftSticker, subscriptionPeriod, data.avatarPeer, uniqueGift]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && ` — (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n        >\n          {formatStarsTransactionAmount(lang, stars)}\n        </span>\n        <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { getMessageLink } from '../../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal, peer, canPlayAnimatedEmojis, topSticker,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, stars, isGiftUpgrade, starGift,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n        && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId && getMessageLink(peer, undefined, giveawayPostId);\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || (isGiftUpgrade && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker;\n    const avatarPeer = !photo ? (peer || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar peer={avatarPeer} webPhoto={photo} size=\"giant\" />\n        )}\n        {!sticker && (\n          <img\n            className={buildClassName(styles.starsBackground)}\n            src={StarsBackground}\n            alt=\"\"\n            draggable={false}\n          />\n        )}\n        {title && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n          >\n            {formatStarsTransactionAmount(lang, stars)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction.starRefCommision) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeStarsAmount(stars) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    tableData.push([\n      peerLabel,\n      peerId ? { chatId: peerId } : toName || '',\n    ]);\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.stars, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    const starCount = modal?.transaction.stars;\n    const starsGiftSticker = modal?.transaction.isGift && selectGiftStickerForStars(global, starCount?.amount);\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import { useMemo, useRef } from '../../lib/teact/teact';\n\n/**\n * Use this hook to bind `<Transition />` animation to changes in the dependency array.\n * Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\n*/\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n  let didUpdate = false;\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useMemo(() => { activeKey.current += 1; didUpdate = true; }, deps);\n\n  if (noAnimation && didUpdate) activeKey.current -= 1;\n\n  return activeKey.current;\n}\n","import { useEffect, useState } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ThemeKey } from '../types';\n\nimport { CUSTOM_BG_CACHE_NAME, DARK_THEME_PATTERN_COLOR, DEFAULT_PATTERN_COLOR } from '../config';\nimport * as cacheApi from '../util/cacheApi';\nimport { preloadImage } from '../util/files';\n\nconst useCustomBackground = (theme: ThemeKey, settingValue?: string) => {\n  const { setThemeSettings } = getActions();\n  const [value, setValue] = useState(settingValue);\n\n  useEffect(() => {\n    if (!settingValue) {\n      return;\n    }\n\n    if (settingValue.startsWith('#')) {\n      setValue(settingValue);\n    } else {\n      cacheApi.fetch(CUSTOM_BG_CACHE_NAME, theme, cacheApi.Type.Blob)\n        .then((blob) => {\n          const url = URL.createObjectURL(blob);\n          preloadImage(url)\n            .then(() => {\n              setValue(`url(${url})`);\n            });\n        })\n        .catch(() => {\n          setThemeSettings({\n            theme,\n            background: undefined,\n            backgroundColor: undefined,\n            isBlurred: true,\n            patternColor: theme === 'dark' ? DARK_THEME_PATTERN_COLOR : DEFAULT_PATTERN_COLOR,\n          });\n        });\n    }\n  }, [settingValue, theme]);\n\n  return settingValue ? value : undefined;\n};\n\nexport default useCustomBackground;\n","import {\n  getIsHeavyAnimating, useCallback, useRef, useState,\n} from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useRunDebounced from './useRunDebounced';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useDebouncedMemo<R extends any, D extends any[]>(\n  resolverFn: () => R, ms: number, dependencies: D,\n): R | undefined {\n  const [value, setValue] = useState<R>();\n  const { isFrozen, updateWhenUnfrozen } = useHeavyAnimationFreeze();\n  const runDebounced = useRunDebounced(ms, true);\n\n  useSyncEffect(() => {\n    if (isFrozen) {\n      updateWhenUnfrozen();\n      return;\n    }\n\n    runDebounced(() => {\n      setValue(resolverFn());\n    });\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [...dependencies, isFrozen]);\n\n  return value;\n}\n\nfunction useHeavyAnimationFreeze() {\n  const isPending = useRef(false);\n\n  const updateWhenUnfrozen = useCallback(() => {\n    isPending.current = true;\n  }, []);\n\n  const forceUpdate = useForceUpdate();\n  const handleUnfreeze = useCallback(() => {\n    if (!isPending.current) {\n      return;\n    }\n\n    isPending.current = false;\n    forceUpdate();\n  }, [forceUpdate]);\n  useHeavyAnimation(noop, handleUnfreeze);\n\n  return {\n    isFrozen: getIsHeavyAnimating(),\n    updateWhenUnfrozen,\n  };\n}\n\nfunction noop() {\n}\n","import { useState } from '../lib/teact/teact';\n\nimport type { ApiChat } from '../api/types';\n\nimport { callApi } from '../api/gramjs';\nimport useAsync from './useAsync';\nimport useDebouncedMemo from './useDebouncedMemo';\nimport useLastCallback from './useLastCallback';\n\nconst DEBOUNCE_TIMEOUT = 300;\n\nexport async function peerGlobalSearch(query: string) {\n  const searchResult = await callApi('searchChats', { query });\n  if (!searchResult) return undefined;\n\n  const ids = [...searchResult.accountResultIds, ...searchResult.globalResultIds];\n\n  return ids;\n}\n\nexport function prepareChatMemberSearch(chat: ApiChat) {\n  return async (query: string) => {\n    const searchResult = await callApi('fetchMembers', {\n      chat,\n      memberFilter: 'search',\n      query,\n    });\n\n    return searchResult?.members?.map((member) => member.userId) || [];\n  };\n}\n\nexport default function usePeerSearch({\n  query,\n  queryFn = peerGlobalSearch,\n  defaultValue,\n  debounceTimeout = DEBOUNCE_TIMEOUT,\n  isDisabled,\n}: {\n  query: string;\n  queryFn?: (query: string) => Promise<string[] | undefined>;\n  defaultValue?: string[];\n  debounceTimeout?: number;\n  isDisabled?: boolean;\n}) {\n  const debouncedQuery = useDebouncedMemo(() => query, debounceTimeout, [query]);\n  const [currentResultsQuery, setCurrentResultsQuery] = useState<string>('');\n  const searchQuery = !query ? query : debouncedQuery; // Ignore debounce if query is empty\n  const queryCallback = useLastCallback(queryFn);\n\n  const result = useAsync(async () => {\n    if (!searchQuery || isDisabled) {\n      setCurrentResultsQuery('');\n      return Promise.resolve(defaultValue);\n    }\n\n    const answer = await queryCallback(searchQuery);\n    setCurrentResultsQuery(searchQuery);\n    return answer;\n  }, [searchQuery, defaultValue, queryCallback, isDisabled], defaultValue);\n\n  return {\n    ...result,\n    currentResultsQuery,\n  };\n}\n","import React from '../../lib/teact/teact';\n\nimport type { LangFn } from './types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../config';\nimport buildClassName from '../buildClassName';\n\nimport Icon from '../../components/common/icons/Icon';\nimport StarIcon from '../../components/common/icons/StarIcon';\n\nexport function formatStarsAsText(lang: LangFn, amount: number) {\n  return lang('StarsAmountText', { amount }, { pluralValue: amount });\n}\n\nexport function formatStarsAsIcon(lang: LangFn, amount: number, options?: { asFont?: boolean; className?: string }) {\n  const { asFont, className } = options || {};\n  const icon = asFont\n    ? <Icon name=\"star\" className={buildClassName('star-amount-icon', className)} />\n    : <StarIcon type=\"gold\" className={buildClassName('star-amount-icon', className)} size=\"adaptive\" />;\n  return lang('StarsAmount', { amount }, {\n    withNodes: true,\n    specialReplacement: {\n      [STARS_ICON_PLACEHOLDER]: icon,\n    },\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"hJUqHi4B\",\"clickable\":\"hjDEmFaT\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"s3k01dTm\",\"transition\":\"BNA0_b5j\",\"main\":\"Oadi16vt\",\"filter\":\"z84KbvhX\",\"title\":\"Jnsrau29\",\"buttons\":\"NnVyYB32\",\"picker\":\"cuI2eDIY\",\"avatars\":\"ILtw_aNL\",\"center\":\"eIfMzHv5\",\"description\":\"FlNJWZ5P\",\"premiumFeatures\":\"xIv0Yaur\",\"options\":\"eNJRXn6P\",\"button\":\"KDNKXBp5\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jKOG0It6\",\"header\":\"A_fX4EXY\",\"spacer\":\"ATowWJ60\",\"title\":\"gDNtv9oz\",\"balance-container\":\"eAKZVhOT\",\"balanceContainer\":\"eAKZVhOT\",\"balance-caption\":\"vbwprYel\",\"balanceCaption\":\"vbwprYel\",\"star-balance\":\"lXuIlbVK\",\"starBalance\":\"lXuIlbVK\",\"balance\":\"dIEx_Iqi\",\"optionsSection\":\"Y68CEIKn\",\"checkboxTitle\":\"H4taXei_\",\"actionMessageView\":\"CB1mxsgp\",\"messageInput\":\"o5r2IPoA\",\"limited\":\"mWzLu0c0\",\"footer\":\"jxWZSvet\",\"switcher\":\"zZUpGRSI\",\"switcherStarIcon\":\"zAee80Dv\",\"description\":\"nTPAv1ci\",\"main-button\":\"IDuhjrne\",\"mainButton\":\"IDuhjrne\",\"star\":\"Q4NlMT0o\",\"background\":\"ZORVRSG3\",\"customBgImage\":\"Eny_G3JI\",\"customBgColor\":\"TkJZPU2u\",\"withTransition\":\"soDpW2YR\",\"blurred\":\"M6k91TdM\",\"withRightColumn\":\"FBcNO8hj\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"G1mBmzxs\",\"starGift\":\"f5ArEO1S\",\"monthsDescription\":\"rn9aWFNA\",\"description\":\"q4_ydkAx\",\"buy\":\"a8no5WH0\",\"star\":\"DvJLTVFU\",\"amount\":\"sbo2dMcH\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"tJK1W0pJ\",\"transition\":\"pP8TxefR\",\"content\":\"o3V1HqbL\",\"main\":\"cVXqeu9P\",\"giftSection\":\"v4eKefwN\",\"section\":\"EqfarEYb\",\"starGiftsContainer\":\"OQX3GZl5\",\"premiumGiftsGallery\":\"n40m3BK2\",\"header\":\"iqqoyRgW\",\"headerSlide\":\"BTWhJUQB\",\"headerText\":\"lLRmbpIu\",\"hiddenHeader\":\"XgGzn1cQ\",\"commonHeaderText\":\"ybZo03if\",\"closeButton\":\"r_Y5uG1T\",\"balance\":\"soqAknia\",\"avatars\":\"N_7tYJKr\",\"logoBackground\":\"ieK4TzSb\",\"center\":\"Ey5gX40t\",\"description\":\"ZioU5h_k\",\"starGiftsDescription\":\"gFgzS8pV\",\"boostIcon\":\"Qi2YR6Dz\",\"optionBottom\":\"RTbClMKE\",\"secondaryInfo\":\"g0R9GSNq\",\"footer\":\"J3Gju3bv\",\"starGiftsTransition\":\"kB6IyXqS\"};","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"cUjwvN00\",\"item-selected\":\"medfcJpd\",\"itemSelected\":\"medfcJpd\",\"item\":\"dO7FKYY4\",\"selected-item\":\"B2lEJk1v\",\"selectedItem\":\"B2lEJk1v\",\"star\":\"Pb7AU805\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"irv1C8bo\",\"radialPattern\":\"UvhsGZLf\",\"sticker\":\"a1ASgPwu\",\"transition\":\"Tu6_OHoq\",\"transitionSlide\":\"iUTKLzTN\",\"title\":\"ECTvfOda\",\"subtitle\":\"S6JwvHWD\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"nnublcCk\",\"header\":\"p7FTs7_p\",\"title\":\"pIbzzTir\",\"description\":\"CCPfr26t\",\"soldOut\":\"kjWcRp4W\",\"footer\":\"bho0GTYt\",\"footerDescription\":\"VUylTszM\",\"unknown\":\"zDauXmpS\",\"giftValue\":\"w_E4LkUj\",\"uniqueAttribute\":\"OJQnkf17\",\"uniqueGift\":\"I6o_pGAm\",\"starAmountIcon\":\"_5guecUe\",\"modalHeader\":\"ie9tImaj\",\"modalCloseButton\":\"p38RBGdC\",\"ownerAddress\":\"DavMRg4Q\",\"copyIcon\":\"SLX5tX8C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"W3JMs1YE\",\"picker\":\"wOipz1Y_\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"qL0cHbwS\",\"profileBlock\":\"t18QCmAb\",\"titleContainer\":\"q8w7tnmR\",\"radialPattern\":\"_1RfhkfB\",\"lockIcon\":\"jiPObOWv\",\"avatar\":\"JK2zOWA7\",\"userTitle\":\"lxxbgNCl\",\"status\":\"MLMdxkUg\",\"giftTitle\":\"wxg_5ou_\",\"infoDescription\":\"KSCLIMZm\",\"footer\":\"VDrvalBo\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"PvaNNycU\",\"giftPreview\":\"nCQxWKdu\",\"backdrop\":\"JCP9JNuS\",\"arrow\":\"p_1cyCau\"};","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"EWaVCxY4\",\"footerButton\":\"_Dt6RSQV\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"LQgz8Nlx\",\"giftPreview\":\"hgs0ts_O\",\"backdrop\":\"OnBhMaBw\",\"description\":\"HBxB4QPY\",\"arrow\":\"kXTOUpfb\",\"noPassword\":\"BnqLhoKr\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"RdhRpsCn\",\"title\":\"yzbjj73U\",\"slider\":\"xePPMXOI\",\"description\":\"BlpfdOtK\",\"modalBalance\":\"Q3560fzx\",\"topLabel\":\"bnou4CpV\",\"top\":\"QludQDKR\",\"topBadge\":\"JBF9pTUK\",\"buttonStar\":\"NJJFuym9\",\"topPeer\":\"Ty4Ud_Rd\",\"disclaimer\":\"KRvkHeo1\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CuBAw2yg\",\"slider\":\"euOOAbZi\",\"sparkles\":\"_L1YQTIP\",\"progress\":\"kwK0cNPX\",\"floatingBadgeWrapper\":\"uvlMoXj0\",\"floatingBadge\":\"BGSDWAYc\",\"floatingBadgeText\":\"qqQan8uF\",\"floatingBadgeTriangle\":\"mIdJOmsB\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TtE8LQNJ\",\"minimal\":\"nkV4JXHc\",\"transition\":\"nXQS4E59\",\"main\":\"JuWZY1ds\",\"container\":\"mnhBs1uK\",\"section\":\"lYkNd_gb\",\"sectionTitle\":\"FF8gm7MP\",\"tos\":\"Vu6blJk9\",\"logo\":\"sjhpNB8l\",\"logoBackground\":\"jjESKN3H\",\"headerHext\":\"xbpAOr37\",\"description\":\"teXilLxe\",\"header\":\"fnhXotO2\",\"starHeaderText\":\"iUwego5s\",\"botItem\":\"AhxcrKWn\",\"hiddenHeader\":\"DZk6d6hF\",\"closeButton\":\"piD1PXHW\",\"balance\":\"LitvQduT\",\"smallerText\":\"rUnPcfmE\",\"balanceBottom\":\"F5BTkZ9G\",\"modalBalance\":\"t8tMrx3y\",\"starButton\":\"oOt4VBD2\",\"paymentContent\":\"OReEUNTV\",\"paymentImages\":\"oKorQYTC\",\"paymentPhoto\":\"HGTrEtUF\",\"avatarStar\":\"Wu10dXoa\",\"paymentImageBackground\":\"os8jb_qv\",\"paymentButton\":\"VzR5cibf\",\"paymentButtonStar\":\"Uhg7yWxK\",\"transactions\":\"Qvc0fTTH\",\"subscriptions\":\"IX5BhCUF\",\"tabs\":\"KZVEyKOX\",\"disclaimer\":\"bpVifdwH\",\"amountBadge\":\"BPM7LKwo\",\"loadMore\":\"TKmZjMyd\",\"loadMoreIcon\":\"buepwtN1\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"MFXAwnxJ\",\"content\":\"Sl6xVf1R\",\"main\":\"bTN9Jeph\",\"headerInfo\":\"c6MiyJgW\",\"logo\":\"StGLWvzb\",\"logoBackground\":\"SyTXSfml\",\"description\":\"kFe3mIZo\",\"section\":\"BgfHkWd2\",\"header\":\"zMtAGfXs\",\"starHeaderText\":\"q3v8orGj\",\"hiddenHeader\":\"bq3FnXT0\",\"closeButton\":\"bDsDTkbe\",\"avatar\":\"jK36xUj4\",\"center\":\"v1PckUQn\",\"secondaryInfo\":\"TDWSRfP9\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ZXnbeQxP\",\"info\":\"zLaaDX3c\",\"status\":\"HbF2qTB2\",\"statusPricing\":\"AveGvpdV\",\"amount\":\"_CBiOQcv\",\"title\":\"k9ZIv5Pd\",\"description\":\"FlRlxMx2\",\"subtitle\":\"YN2J8dw6\",\"statusPeriod\":\"MRrP7Oew\",\"statusEnded\":\"pRHwfr8m\",\"preview\":\"t6Syyhzd\",\"subscriptionStar\":\"ftlbevPm\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"eR_RZfGB\",\"header\":\"E3R22yAI\",\"title\":\"qdydQHgc\",\"amount\":\"FI6rEJlK\",\"footer\":\"GMWMuWCr\",\"starsBackground\":\"zGCayu45\",\"avatarWrapper\":\"wuTMXDP9\",\"subscriptionStar\":\"enRetSny\",\"amountStar\":\"J8HIcN6k\",\"secondary\":\"oBLHWBtJ\",\"danger\":\"nkwiG25Q\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jQkp75Gb\",\"preview\":\"OYGSN3PF\",\"count\":\"KX1yz2Jy\",\"thumb\":\"EvinKr5k\",\"noOutline\":\"KSAAsUDv\",\"itemCount1\":\"GxDajfX_\",\"itemCount2\":\"jXuZoxq8\",\"itemCount3\":\"TPn3XGHJ\",\"blurry\":\"hWZuxLS8\",\"full\":\"w56QPFhl\",\"fadeIn\":\"ds43W8Wq\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aHAxv_Jg\",\"info\":\"oyYrn3II\",\"stars\":\"K5lc75ku\",\"amount\":\"QLQPuLAr\",\"title\":\"e0pK8CJ_\",\"description\":\"xbERdDMQ\",\"date\":\"l6CwQ0Ev\",\"positive\":\"P_42_ZWR\",\"negative\":\"TGjnLJfH\",\"preview\":\"cnjGihOT\",\"subscriptionStar\":\"z43YvnDX\",\"uniqueGiftBackground\":\"eNvzMw2p\",\"uniqueGift\":\"QsvgfDmw\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"IzhfRIWu\",\"positive\":\"jvBZSrpd\",\"negative\":\"xDyq9cc0\",\"header\":\"qBOIq6Jn\",\"uniqueGift\":\"ApoQz22o\",\"amount\":\"sso9uZM6\",\"title\":\"ZZAj3hj7\",\"description\":\"NuWOY7ED\",\"tid\":\"tMF8VIOM\",\"footer\":\"KgzPpgS6\",\"starsBackground\":\"nML8IQqX\",\"copyIcon\":\"voCttFzS\",\"mediaPreview\":\"C5r59yiV\",\"subtitle\":\"mFYcIYMJ\",\"starGiftSticker\":\"j3akHdtm\"};"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftUpgradeModal","GiftStatusInfoModal","GiftWithdrawModal","GiftTransferModal","React","buildClassName","styles","BadgeButton","children","className","onClick","createElement","root","clickable","memo","useMemo","useState","getActions","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","isDeletedUser","isUserBot","filterPeersByQuery","unique","sortChatIds","useLastCallback","useOldLang","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","oldLang","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredUserIds","ids","query","type","filter","id","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","STARS_CURRENCY_CODE","getPeerTitle","isApiPeerUser","selectPeer","selectTabState","selectTheme","buildStyle","formatCurrency","formatStarsAsIcon","useCustomBackground","useLang","PremiumProgress","ActionMessage","Button","Link","ListItem","Switcher","TextArea","LIMIT_DISPLAY_THRESHOLD","GiftComposer","gift","peerId","peer","captionLimit","theme","isBackgroundBlurred","patternColor","backgroundColor","customBackground","isPaymentFormLoading","sendStarGift","openInvoice","openGiftUpgradeModal","lang","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","customBackgroundValue","isStarGift","isPeerUser","localMessage","chatId","isOutgoing","senderId","date","Math","floor","Date","now","content","action","targetChatId","mediaType","text","amount","currency","months","message","translationValues","stars","starGift","undefined","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","isSaved","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","handleOpenUpgradePreview","giftId","handleMainButtonClick","shouldUpgrade","option","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","switcherStarIcon","withNodes","checked","description","link","isPrimary","receiver","renderFooter","asFont","footer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","mainButton","isLoading","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","key","spacer","isBlurred","settings","themes","tabState","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","AnimatedIconFromSticker","GiftRibbon","GIFT_STICKER_SIZE","GiftItemPremium","sticker","canPlayAnimatedEmojis","baseMonthAmount","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","pluralValue","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","size","buy","pill","fluid","Boolean","color","percent","useRef","useFlag","useOnIntersect","Icon","GiftItemStar","observeIntersection","openGiftInfoModal","ref","shouldPlay","isLimited","isSoldOut","entry","isIntersecting","withSparkleEffect","name","star","useEffect","getUserFullName","isApiPeerChat","throttle","useCurrentOrPrev","useIntersectionObserver","Avatar","SafeLink","Modal","Transition","BalanceBlock","GiftSendingOptions","StarGiftCategoryList","StarsBackground","AVATAR_SIZE","INTERSECTION_THROTTLE","SCROLL_THROTTLE","runThrottledForScroll","cb","PremiumGiftModal","modal","starGiftsById","starGiftIdsByCategory","starBalance","isSelf","closeGiftModal","dialogRef","transitionRef","giftHeaderRef","scrollerRef","renderingModal","chat","selectedGift","setSelectedGift","isHeaderHidden","setIsHeaderHidden","isHeaderForStarGifts","setIsHeaderForStarGifts","selectedCategory","setSelectedCategory","filteredGifts","gifts","sort","prevGift","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","handleScroll","currentTarget","scrollTop","current","top","headerTop","getBoundingClientRect","transitionTop","giftPremiumDescription","url","starGiftDescription","withMarkdown","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","renderStarGifts","starGiftsContainer","map","renderPremiumGifts","premiumGiftsGallery","onCategoryChanged","category","handleCloseButtonClick","renderMainScreen","main","onScroll","avatars","logoBackground","src","alt","draggable","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","isSlim","contentClassName","modalDialog","closeButton","round","ariaLabel","balance","header","hiddenHeader","Number","slideClassName","headerSlide","commonHeaderText","transition","forPeerId","starGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","useHorizontalScroll","StarIcon","starCategories","Object","keys","a","b","handleItemClick","renderCategoryName","renderCategoryItem","item","selectedItem","isInteger","list","useTransitionActiveKey","RadialPatternBackground","STICKER_SIZE","UniqueGiftHeader","modelAttribute","backdropAttribute","patternAttribute","subtitle","subtitleColor","textColor","radialPatternBackdrop","backdropColors","centerColor","edgeColor","radialPattern","backgroundColors","patternIcon","transitionSlide","direction","DEFAULT_STATUS_ICON_ID","TME_LINK_PREFIX","getHasAdminRight","selectUser","copyTextToClipboard","formatDateTimeToString","formatStarsAsText","CUSTOM_PEER_HIDDEN","getServerTime","formatInteger","formatPercent","getGiftAttributes","getStickerFromGift","renderTextWithEntities","ConfirmDialog","DropdownMenu","MenuItem","TableInfoModal","fromPeer","targetPeer","starGiftMaxConvertPeriod","hasAdminRights","currentUserEmojiStatus","collectibleEmojiStatuses","closeGiftInfoModal","changeGiftVisibility","convertGiftToStars","openChatWithInfo","focusMessage","showNotification","openChatWithDraft","openGiftStatusInfoModal","setEmojiStatus","openGiftTransferModal","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","renderingFromPeer","renderingTargetPeer","isTargetChat","typeGift","isSavedGift","savedGift","isSender","canConvertDifference","conversionLeft","giftSticker","currenUniqueEmojiStatusSlug","slug","starGiftUniqueSlug","starGiftUniqueLink","userCollectibleStatus","find","status","isGiftUnique","canTakeOff","canWear","canFocusUpgrade","upgradeMsgId","canUpdate","inputGift","handleClose","handleCopyLink","handleLinkShare","handleTransfer","handleWear","emojiStatus","handleTakeOff","documentId","handleFocusUpgraded","messageId","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleOpenUpgradeModal","giftAttributes","SettingsMenuButton","onTrigger","isMenuOpen","renderFooterButton","isShiny","modalData","isConverted","isVisibleForMe","getTitle","uniqueGiftContextMenu","trigger","positionX","icon","uniqueGiftModalHeader","modalHeader","modalCloseButton","uniqueGiftHeader","uniqueGift","backdrop","pattern","model","number","regularHeader","soldOut","tableData","push","Fragment","unknown","titleKey","code","firstSaleDate","lastSaleDate","starsValue","giftValue","starAmountIcon","total","ownerName","ownerAddress","ownerId","originalDetails","copyIcon","withEmojiStatus","uniqueAttribute","rarityPercent","issued","issuedCount","totalCount","recipientId","openChat","recipient","sender","formattedDate","recipientLink","senderLink","footerDescription","hasBackdrop","confirmHandler","currentUser","statuses","selectCanGift","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectedId","forceShowSelf","selectIsCurrentUserPremium","useCustomEmoji","FullNameTitle","TableAboutModal","isCurrentUserPremium","closeGiftStatusInfoModal","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","profileBlock","avatar","userTitle","noFake","noVerified","statusSparklesColor","titleContainer","giftTitle","infoDescription","listItemData","lockIcon","ALL_FOLDER_ID","MEMO_EMPTY_ARRAY","REM","useFolderManagerForOrderedIds","usePeerSearch","contactIds","closeGiftTransferModal","openGiftWithdrawModal","transferGift","setSelectedId","renderingSelectedPeerId","renderingSelectedPeer","orderedChatIds","sortedLocalIds","result","foundIds","currentResultsQuery","defaultValue","categories","isCustomPeer","avatarIcon","peerColorId","handleCategoryChange","displayIds","closeConfirmModal","transferStars","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","noDefaultTitle","confirmLabel","giftPreview","arrow","ApiMediaFormat","getStickerMediaHash","fetch","useInterval","Checkbox","PREVIEW_UPDATE_INTERVAL","closeGiftUpgradeModal","upgradeGift","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","previewAttributes","setPreviewAttributes","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomAttributes","attributes","patternStickers","attr","modelStickers","mediaHashes","forEach","hash","BlobUrl","footerButton","onCheck","previousSelection","models","patterns","backdrops","randomModel","random","randomPattern","randomBackdrop","getDays","PasswordForm","FRAGMENT_PEER","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","max","handleSubmit","password","exportHint","days","noPassword","shouldShowSubmit","placeholder","error","errorKey","withRegular","clearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","byKey","twoFaSettings","STARS_ICON_PLACEHOLDER","getChatTitle","selectChat","selectChatMessage","renderText","PeerBadge","Separator","StarSlider","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","maxAmount","defaultPrivacy","closePaidReactionModal","addLocalPaidReaction","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldShowUp","setShouldShowUp","handleAnonimityChange","handleAmountChange","currentReactor","reactions","topReactors","reactor","isMe","isAnonymous","handleSend","isPrivate","all","hasMe","localAmount","me","slice","chatTitle","hasAbsoluteCloseButton","modalBalance","slider","maxValue","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","specialReplacement","buttonStar","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","requestMeasure","requestMutation","useEffectOnce","useResizeObserver","AnimatedCounter","Sparkles","DEFAULT_POINTS","floatingBadgeRef","points","i","setValue","getProgress","updateSafeBadgePosition","badge","parent","parentElement","safeMinX","offsetLeft","offsetWidth","safeMaxX","setProperty","handleChange","event","newValue","getValue","floatingBadgeWrapper","floatingBadge","floatingBadgeText","floatingBadgeIcon","floatingBadgeTriangle","width","height","viewBox","fill","x1","x2","y1","y2","offset","d","preset","sparkles","min","step","pointIndex","findIndex","point","prevPoint","nextPoint","formatStarsAmount","smallerText","balanceBottom","selectIsPremiumPurchaseBlocked","InfiniteScroll","TabList","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","StarLogo","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","canBuyPremium","shouldForceHeight","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","history","subscriptions","setHeaderHidden","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","transactionTabs","tosText","parts","split","handleLoadMoreTransactions","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","minimal","starHeaderText","section","logo","starButton","isText","noForcedUpperCase","topupOptions","options","tos","sectionTitle","subscription","nextOffset","disabled","loadMore","loadMoreIcon","isRtl","renderCount","shouldRestoreHeight","onLoadMore","items","scrollContainerClosest","itemSelector","noFastList","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","usePrevious","PeerChip","PaidMediaThumb","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","openStarsBalanceModal","sendStarPaymentForm","markLoading","unmarkLoading","inputInvoice","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","every","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeStarsGiftModal","requestConfetti","selectedOption","setSelectedOption","showConfetti","dialog","left","querySelector","withStars","isCompleted","handleClick","userId","renderGiftTitle","bottomText","headerInfo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","getTransactionTitle","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","isNegativeStarsAmount","customPeer","nanos","formatDateToString","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","preview","subscriptionStar","info","webPhoto","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","isActive","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","isLocked","reverse","arr","realIndex","thumb","isVisible","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","index","video","mediaHash","mediaBlob","blurry","full","formatStarsTransactionAmount","CUSTOM_PEER_PREMIUM","UNIQUE_GIFT_STICKER_SIZE","selectOptionalPeer","openStarsTransactionModal","transactionPeer","uniqueGiftSticker","data","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","StarsTransactionModal","topSticker","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","flatMap","values","isUniqueGift","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","peerLabel","tid","footerText","footerTextParts","buttonText","starCount","starsGiftSticker","deps","noAnimation","didUpdate","CUSTOM_BG_CACHE_NAME","DARK_THEME_PATTERN_COLOR","DEFAULT_PATTERN_COLOR","cacheApi","preloadImage","settingValue","setThemeSettings","startsWith","Type","Blob","then","blob","URL","createObjectURL","catch","getIsHeavyAnimating","useCallback","useForceUpdate","useHeavyAnimation","useRunDebounced","useSyncEffect","useDebouncedMemo","resolverFn","ms","dependencies","isFrozen","updateWhenUnfrozen","useHeavyAnimationFreeze","runDebounced","forceUpdate","handleUnfreeze","noop","callApi","useAsync","DEBOUNCE_TIMEOUT","peerGlobalSearch","searchResult","accountResultIds","globalResultIds","prepareChatMemberSearch","memberFilter","members","member","queryFn","debounceTimeout","debouncedQuery","setCurrentResultsQuery","queryCallback","Promise","resolve","answer"],"sourceRoot":""}